---
import '@fontsource-variable/inter'
import '@fortawesome/fontawesome-free/css/all.min.css'
import 'bootstrap/dist/css/bootstrap.min.css'
import bootstrapJs from 'bootstrap/dist/js/bootstrap.bundle.min.js?url'

import Base from '~/layouts/Base.astro'
import type { Props as BaseProps } from '~/layouts/Base.astro'

export interface Props extends Omit<BaseProps, 'title'>
{
	title?: BaseProps['title']
}

interface Site
{
	title?: string
	description?: string
	author?: string
}

const site: Site = {
	title: 'Matiboux.me',
	author: 'Matiboux',
}

if (site.title === undefined && Astro.props.title === undefined)
{
	throw new Error('Title is undefined')
}

const baseProps: BaseProps = {
	...Astro.props,
	title: Astro.props.title
		? (site.title
			? `${Astro.props.title} â€“ ${site.title}`
			: Astro.props.title
		)
		: (site.title || ''),
	description: Astro.props.description || site.description,
	author: Astro.props.author || site.author,
}
---

<Base {...baseProps}>

	<Fragment slot="head">
		<script src={bootstrapJs} defer></script>

		<slot name="head" />
	</Fragment>

	<slot />

</Base>
